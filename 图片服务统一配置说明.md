# 统一图片服务配置说明

## 配置策略

**所有环境（开发环境、测试环境、生产环境）都统一使用线上服务器进行图片存储和访问。**

## 配置详情

### 线上图片服务器
- **服务器地址**: `http://120.46.28.146:8088`
- **上传接口**: `http://120.46.28.146:8088/api/upload/image`
- **图片访问**: `http://120.46.28.146:8088/uploads/images/{filename}`

### 环境配置

#### 开发环境 (本地开发)
- **API服务**: `http://127.0.0.1:8088` (本地)
- **图片上传**: `http://120.46.28.146:8088/api/upload/image` (线上)
- **图片访问**: `http://120.46.28.146:8088/uploads/images/` (线上)

#### 生产环境 (线上部署)
- **API服务**: `http://120.46.28.146:8088` (线上)
- **图片上传**: `http://120.46.28.146:8088/api/upload/image` (线上)
- **图片访问**: `http://120.46.28.146:8088/uploads/images/` (线上)

## 优势

### ✅ 数据一致性
- 开发环境和生产环境使用相同的图片数据
- 避免图片丢失或不同步问题
- 团队协作时图片资源共享

### ✅ 部署简便
- 无需迁移图片文件
- 减少服务器存储压力
- 统一的图片管理

### ✅ 开发便利
- 本地开发时可以看到真实的图片数据
- 测试更接近生产环境
- 减少环境差异导致的问题

## 注意事项

### 🔒 安全考虑
确保线上图片服务器：
- 防火墙已开放8088端口
- 图片上传接口有适当的权限控制
- 定期备份图片数据

### 🌐 网络考虑
- 本地开发需要稳定的网络连接
- 图片上传速度取决于网络状况
- 建议配置CDN加速图片访问

### 📁 存储管理
- 定期清理无用图片
- 监控存储空间使用情况
- 建立图片命名规范

## 配置文件

### 前端配置 (`applet-admin/src/config/api.js`)
```javascript
const UNIFIED_IMAGE_SERVER = 'http://120.46.28.146:8088';
```

### 后端配置 (`Api/config/server.js`)
```javascript
baseUrl: 'http://120.46.28.146:8088' // 统一使用线上地址
```

## 验证测试

部署完成后，请验证：

1. **本地开发环境**
   - [ ] 图片上传功能正常
   - [ ] 上传后的图片能正常显示
   - [ ] 图片URL指向线上服务器

2. **生产环境**
   - [ ] 图片上传功能正常
   - [ ] 历史图片依然可访问
   - [ ] 新上传的图片正常显示

3. **跨环境测试**
   - [ ] 本地上传的图片在线上可见
   - [ ] 线上上传的图片在本地可见
   - [ ] 数据库中的图片路径正确

---

**配置日期**: 2025-01-09  
**维护人**: 开发团队 